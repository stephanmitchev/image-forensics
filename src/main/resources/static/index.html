<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Forensic Services</title>
    <script src="//code.jquery.com/jquery-3.1.0.min.js"
            integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>

    <style>
        .analyzedImage{
            margin: 5px 5px 5px 5px;
            width: 300px;
        }
    </style>
    <script>

        var handleDragOver = function(evt) {
            evt.stopPropagation();
            evt.preventDefault();
            evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
        }

        var handleFileSelect = function(evt) {
            evt.stopPropagation();
            evt.preventDefault();

            var files = evt.dataTransfer.files; // FileList object.

            // files is a FileList of File objects. List some properties.
            var output = [];
            if (files.length > 0 && files[0].type.match('image.*')) {

                var reader = new FileReader();

                reader.onload = (function(theFile) {

                    return function(e) {

                        var split = e.target.result.split("base64,")

                        var fd;
                        fd = new FormData();
                        fd.append('image', split[1]);
                        fd.append('ampFactor', 2);
                        $.ajax({url: '/ela',method: "POST",cache: false,contentType: false,processData: false,data: fd})
                                .done(function( result ) { $("#ela2").prop("src", "data:image/jpeg;base64,"+result.image); });

                        fd = new FormData();
                        fd.append('image', split[1]);
                        fd.append('ampFactor', 6);
                        $.ajax({url: '/ela',method: "POST",cache: false,contentType: false,processData: false,data: fd})
                                .done(function( result ) { $("#ela6").prop("src", "data:image/jpeg;base64,"+result.image); });

                        fd = new FormData();
                        fd.append('image', split[1]);
                        fd.append('minShift', 10);
                        $.ajax({url: '/copymove',method: "POST",cache: false,contentType: false,processData: false,data: fd})
                                .done(function( result ) { $("#cm10").prop("src", "data:image/jpeg;base64,"+result.image); });

                        fd = new FormData();
                        fd.append('image', split[1]);
                        fd.append('minShift', 25);
                        $.ajax({url: '/copymove',method: "POST",cache: false,contentType: false,processData: false,data: fd})
                                .done(function( result ) { $("#cm25").prop("src", "data:image/jpeg;base64,"+result.image); });

                        fd = new FormData();
                        fd.append('image', split[1]);
                        fd.append('minShift', 50);
                        $.ajax({url: '/copymove',method: "POST",cache: false,contentType: false,processData: false,data: fd})
                                .done(function( result ) { $("#cm50").prop("src", "data:image/jpeg;base64,"+result.image); });


                    };
                })(files[0]);

                reader.readAsDataURL(files[0])
            }

        }


    </script>

</head>
<body>
<div id="imageDropZone" style="border: 2px dotted lightgray; border-radius: 10px; width: 200px; height:50px; color:darkgray; text-align: center; line-height: 45px">
    Drop image here
</div>
<img class="analyzedImage" src="" id="ela2" />
<img class="analyzedImage" src="" id="ela6" />
<img class="analyzedImage" src="" id="cm10" />
<img class="analyzedImage" src="" id="cm25" />
<img class="analyzedImage" src="" id="cm50" />

<script>
    $(document).ready(function () {

        $("#imageDropZone").each(function() {
            this.addEventListener('dragover', handleDragOver, false);
            this.addEventListener('drop', handleFileSelect, false);
        });

    });
</script>
</body>
</html>